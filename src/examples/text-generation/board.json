{
	"title": "Hugging Face Text Generation Board",
	"description": "Board which calls the Hugging Face Text Generation Endpoint",
	"edges": [
		{
			"from": "main",
			"to": "output-2",
			"out": "output",
			"in": "output"
		},
		{
			"from": "fetch-5",
			"to": "main",
			"out": "*",
			"in": ""
		},
		{
			"from": "fn-3",
			"to": "fetch-5",
			"out": "auth",
			"in": "headers"
		},
		{
			"from": "fn-4",
			"to": "fetch-5",
			"out": "payload",
			"in": "body"
		},
		{
			"from": "query",
			"to": "fn-3",
			"out": "apiKey",
			"in": "key"
		},
		{
			"from": "query",
			"to": "fn-4",
			"out": "inputs",
			"in": "inputs"
		},
		{
			"from": "query",
			"to": "fn-4",
			"out": "top_k",
			"in": "top_k"
		},
		{
			"from": "query",
			"to": "fn-4",
			"out": "top_p",
			"in": "top_p"
		},
		{
			"from": "query",
			"to": "fn-4",
			"out": "max_length",
			"in": "max_length"
		},
		{
			"from": "query",
			"to": "fn-4",
			"out": "num_return_sequences",
			"in": "num_return_sequences"
		}
	],
	"nodes": [
		{
			"id": "output-2",
			"type": "output",
			"configuration": {
				"schema": {
					"type": "object",
					"properties": {
						"output": {
							"type": "string",
							"title": "output"
						}
					}
				}
			}
		},
		{
			"id": "main",
			"type": "output",
			"configuration": {}
		},
		{
			"id": "fetch-5",
			"type": "fetch",
			"configuration": {
				"method": "POST",
				"url": "https://api-inference.huggingface.co/models/openai-community/gpt2"
			}
		},
		{
			"id": "fn-3",
			"type": "invoke",
			"configuration": {
				"$board": "#fn-3"
			}
		},
		{
			"id": "fn-4",
			"type": "invoke",
			"configuration": {
				"$board": "#fn-4"
			}
		},
		{
			"id": "query",
			"type": "input",
			"configuration": {
				"schema": {
					"title": "Hugging Face Schema For Text Generation",
					"properties": {
						"inputs": {
							"type": "string",
							"title": "data",
							"default": "The answer to the universe is",
							"description": "The data to send to the hugging face api"
						},
						"apiKey": {
							"type": "string",
							"title": "apiKey",
							"default": "myKey",
							"description": "The hugging face api key"
						},
						"top_k": {
							"type": "number",
							"title": "top_k",
							"default": "None",
							"description": "Integer to define the top tokens considered within the sample operation to create new text"
						},
						"top_p": {
							"type": "number",
							"title": "top_P",
							"default": "None",
							"description": "Float to define the tokens that are within the sample operation of text generation. Add tokens in the sample for more probable to least probable until the sum of the probabilities is greater than top_p"
						},
						"max_length": {
							"type": "number",
							"title": "max_length",
							"default": "100",
							"description": "Max Length of the input"
						}
					}
				},
				"type": "string"
			}
		}
	],
	"graphs": {
		"fn-3": {
			"edges": [
				{
					"from": "fn-3-input",
					"to": "fn-3-run",
					"out": "*"
				},
				{
					"from": "fn-3-run",
					"to": "fn-3-output",
					"out": "*"
				}
			],
			"nodes": [
				{
					"id": "fn-3-input",
					"type": "input",
					"configuration": {}
				},
				{
					"id": "fn-3-run",
					"type": "runJavascript",
					"configuration": {
						"code": "function fn_3(inputs) {const key=inputs.key;const auth={Authorization:`Bearer ${key}`};return{auth}}",
						"name": "fn_3",
						"raw": true
					}
				},
				{
					"id": "fn-3-output",
					"type": "output",
					"configuration": {}
				}
			]
		},
		"fn-4": {
			"edges": [
				{
					"from": "fn-4-input",
					"to": "fn-4-run",
					"out": "*"
				},
				{
					"from": "fn-4-run",
					"to": "fn-4-output",
					"out": "*"
				}
			],
			"nodes": [
				{
					"id": "fn-4-input",
					"type": "input",
					"configuration": {}
				},
				{
					"id": "fn-4-run",
					"type": "runJavascript",
					"configuration": {
						"code": "function fn_4(input) {const{inputs,top_k,top_p,max_length,num_return_sequences}=input;const payload={inputs,parameters:{top_k,top_p,max_length,num_return_sequences}};return{payload}}",
						"name": "fn_4",
						"raw": true
					}
				},
				{
					"id": "fn-4-output",
					"type": "output",
					"configuration": {}
				}
			]
		}
	}
}